<!doctype html><html lang=en><head><title>VirtIO Paravirtualized cryptographic character device for QEMU-KVM :: arvchristos — Personal web corner</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="VirtIO Paravirtualized cryptographic character device for QEMU-KVM for Operating Systems Laboratory course of Electrical and Computer Engineering School of NTUA Athens. You can find the project code on GitHub
This exercise contains paradigm code for the implementation of a paravirtualized character device that exports the native /dev/crypto device of cryptodev to a QEMU VM.
 Client-server chat over TCP/IP sockets (/no_encryption)  For testing purposes, we first implement a simple chat system based on the client-server architecture, using TCP/IP UNIX sockets."><meta name=keywords content><meta name=robots content=noodp><link rel=canonical href=/project/virtio_paravirt_crypto_char_device/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><meta name=twitter:card content=summary><meta name=twitter:title content="VirtIO Paravirtualized cryptographic character device for QEMU-KVM"><meta name=twitter:description content="Project in the context of NTUA Databases course."><meta property=og:title content="VirtIO Paravirtualized cryptographic character device for QEMU-KVM"><meta property=og:description content="Project in the context of NTUA Databases course."><meta property=og:type content=article><meta property=og:url content=/project/virtio_paravirt_crypto_char_device/><meta property=article:published_time content=2019-05-20T00:00:00+00:00><meta property=article:modified_time content=2019-05-20T00:00:00+00:00><meta property=og:site_name content=arvchristos><script src=https://identity.netlify.com/v1/netlify-identity-widget.js></script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" class="greater-icon"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>@arvchristos</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a class=active href=/projects>Projects</a></li><li><a href=/blog>Blog</a></li><li><a href=/contact>Contact</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/projects>Projects</a></li><li><a href=/blog>Blog</a></li><li><a href=/contact>Contact</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22 3 32.4934 11.5066 41 22 41zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h2 class=post-title><a href=/project/virtio_paravirt_crypto_char_device/>VirtIO Paravirtualized cryptographic character device for QEMU-KVM</a></h2><div class=post-meta><span class=post-date>2019-05-20</span>
<span class=post-tags>#<a href=/tags/virtio/>virtio</a>&nbsp;
#<a href=/tags/driver/>driver</a>&nbsp;
#<a href=/tags/qemu/>qemu</a>&nbsp;
#<a href=/tags/kvm/>kvm</a>&nbsp;
#<a href=/tags/c/>c</a>&nbsp;
#<a href=/tags/university/>university</a>&nbsp;</span></div><div class=post-content><p><em>VirtIO Paravirtualized cryptographic character device for QEMU-KVM for Operating Systems Laboratory course of Electrical and Computer Engineering School of NTUA Athens.</em>
<em>You can find the project code on <a href=https://github.com/arvchristos/oslab-ntua/tree/master/paravirtualization>GitHub</a></em></p><p>This exercise contains paradigm code for the implementation of a paravirtualized character device that exports the native <code>/dev/crypto</code> device of cryptodev to a QEMU VM.</p><ul><li>Client-server chat over TCP/IP sockets (<code>/no_encryption</code>)</li></ul><p>For testing purposes, we first implement a simple chat system based on the <code>client-server</code> architecture, using TCP/IP UNIX sockets.</p><ul><li>Encrypted chat over TCP/IP sockets (<code>/encryption</code>)</li></ul><p>Next, we added encryption functionality to the aforementioned client-server system. The implementation preserves the sockets API usage providing transparency and transmiting only the encrypted text over the socket. The implementation uses the native cryptodev <code>/dev/crypto</code> character device.</p><ul><li>Paravirtualized cryptographic driver device (<code>/paravirt_encryption</code>)</li></ul><p>Using the client-server system implemented in the context of two QEMU virtual machines we faced serious performaace overhead, mainly from the cryptodev device that is also emulated. For this reason, we implemented a paravirtualized character device for each of the two guests that exposes the native <code>/dev/crypto</code> of the host.</p><p>The driver is composed of two parts, the frontend that is executed inside the character device driver of the guest and the backend that is executed in host userspace. Those two parts communicate usnig VirtIO paradigm principles.</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other projects</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/project/contourusb/><span class=button__icon>←</span>
<span class=button__text>Ascensia ContourUSB Python driver</span></a></span>
<span class="button next"><a href=/project/page-numbering-addon-libreoffice/><span class=button__text>Page Numbering Addon - LibreOffice/OpenOffice</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" class="greater-icon"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>@arvchristos</span>
<span class=logo__cursor></span></a><div class=copyright><span>Developed by <a href=https://www.linkedin.com/in/arvchristos/ target=_blank rel=noopener>arvchristos</a></span>
<span>© 2020 Powered by <a href=https://opensource.org/ target=_blank rel=noopener>Open Source Software</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script><script src=/assets/fontawesome.js crossorigin=anonymous></script><script>if(window.netlifyIdentity){window.netlifyIdentity.on("init",user=>{if(!user){window.netlifyIdentity.on("login",()=>{document.location.href="/admin/";});}});}</script></div></body></html>